{% extends "bootstrap_base.html" %}
{% block content %}
<div class="container py-5">
    <h2 class="mb-4 text-center text-light">ü™ê Birth Chart for {{ chart.name or 'Anonymous' }}</h2>
    <div class="row mb-4">
        <div class="col-md-6 text-light">
            <ul class="list-group bg-dark">
                <li class="list-group-item bg-dark text-light">Date: {{ chart.date }}</li>
                <li class="list-group-item bg-dark text-light">Time: {{ chart.time }}</li>
                <li class="list-group-item bg-dark text-light">Coordinates: {{ chart.latitude }}, {{ chart.longitude }}</li>
                <li class="list-group-item bg-dark text-light">Ayanamsa: {{ chart.ayanamsa|capitalize }} ({{ chart.ayanamsa_val }})</li>
            </ul>
        </div>
        <div class="col-md-6 text-light">
            <h4>Legend</h4>
            <small>
                <span class="badge bg-warning text-dark">C</span> Combust |
                <span class="badge bg-info text-dark">R</span> Retrograde |
                <span class="badge bg-success text-dark">D</span> Direct |
                <span class="badge bg-danger text-light">E</span> Eclipse
            </small>
        </div>
    </div>
    <h3 class="text-light">Planetary Positions</h3>
    <table class="table table-dark table-striped">
        <thead>
            <tr>
                <th>Planet</th>
                <th>Degree</th>
                <th>Sign</th>
                <th>Nakshatra</th>
                <th>Pada</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for p in chart.planets %}
            <tr>
                <td>{{ p.planet }}</td>
                <td>{{ p.degree }}</td>
                <td>{{ p.sign }}</td>
                <td>{{ p.nakshatra }}</td>
                <td>{{ p.pada }}</td>
                <td>
                    {% if "C" in p.status %}<span class="badge bg-warning text-dark">C</span>{% endif %}
                    {% if "R" in p.status %}<span class="badge bg-info text-dark">R</span>{% endif %}
                    {% if "D" in p.status %}<span class="badge bg-success text-dark">D</span>{% endif %}
                    {% if "E" in p.status %}<span class="badge bg-danger text-light">E</span>{% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h3 class="text-light mt-4">House Placements</h3>
    <table class="table table-dark table-bordered">
        <thead>
            <tr>
                <th>House</th>
                <th>Degree</th>
                <th>Sign</th>
            </tr>
        </thead>
        <tbody>
            {% for h in chart.houses %}
            <tr>
                <td>{{ h.house }}</td>
                <td>{{ h.degree|round(2) }}</td>
                <td>{{ h.sign }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h3 class="text-light mt-4">Vimshottari Dasha Periods</h3>
    <table class="table table-dark table-bordered">
        <thead>
            <tr>
                <th>Dasha Lord</th>
                <th>Start</th>
                <th>End</th>
            </tr>
        </thead>
        <tbody>
            {% for d in vimshottari %}
            <tr>
                <td>{{ d.dasha_lord }}</td>
                <td>{{ d.start }}</td>
                <td>{{ d.end }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h3 class="text-light mt-4">Current Transits</h3>
    <table class="table table-dark table-bordered">
        <thead>
            <tr>
                <th>Planet</th>
                <th>Degree</th>
                <th>Sign</th>
                <th>Nakshatra</th>
                <th>Pada</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for t in transits %}
            <tr>
                <td>{{ t.planet }}</td>
                <td>{{ t.degree }}</td>
                <td>{{ t.sign }}</td>
                <td>{{ t.nakshatra }}</td>
                <td>{{ t.pada }}</td>
                <td>
                    {% if "C" in t.status %}<span class="badge bg-warning text-dark">C</span>{% endif %}
                    {% if "R" in t.status %}<span class="badge bg-info text-dark">R</span>{% endif %}
                    {% if "D" in t.status %}<span class="badge bg-success text-dark">D</span>{% endif %}
                    {% if "E" in t.status %}<span class="badge bg-danger text-light">E</span>{% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
